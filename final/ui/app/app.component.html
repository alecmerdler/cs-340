<md-content style="height: 100%; overflow: hidden;">
    <!-- Toolbar -->
    <md-toolbar class="md-hue-2">
        <div layout="column">
            <div class="md-toolbar-tools">
                <div flex layout="row">
                    <span style="cursor: pointer;" ng-click="$ctrl.currentView.next('list')">TubeRoom</span>
                </div>
                <div ng-if="!$ctrl.currentUser">
                    <md-button ng-click="$ctrl.currentView.next('login')">Login</md-button>
                </div>
                <div ng-if="$ctrl.currentUser">
                    <span>{{ $ctrl.currentUser.firstName }}</span>
                    <md-button ng-click="$ctrl.logout()">Logout</md-button>
                </div>
            </div>
            <div class="md-toolbar-tools" hide-gt-xs>
                <md-button class="md-icon-button"
                           ng-click="$ctrl.currentView.next('list')">
                    <i class="material-icons">home</i>
                </md-button>
                <md-button class="md-icon-button"
                           ng-click="$ctrl.currentView.next('list')">
                    <i class="material-icons">movie</i>
                </md-button>
            </div>
        </div>
    </md-toolbar>

    <!-- Login View -->
    <div layout="row" layout-align="center" style="overflow-y: auto; height: 100%;"
         ng-if="$ctrl.currentView.getValue() === 'login' || $ctrl.currentView.getValue() === 'signup'">
        <div flex="33" flex-xs="100">
            <login (login-success)="$ctrl.onLogin($event)"
                   (signup-success)="$ctrl.onSignup($event)"></login>
        </div>
    </div>

    <!-- Main View-->
    <div layout="row" layout-xs="column" style="overflow-y: auto; height: 100%;"
         ng-if="$ctrl.currentView.getValue() != 'login' && $ctrl.currentView.getValue() != 'signup'">
        <div flex="50" flex-xs="100">
            <media-detail ng-if="$ctrl.currentView.getValue() == 'detail'"
                          [media]="$ctrl.currentMedia"
                          [can-recommend]="$ctrl.currentUser"
                          [user-list]="$ctrl.userList"
                          (create-recommendation)="$ctrl.onCreateRecommendation($event)"></media-detail>

            <!-- Reviews/Recommendations List -->
            <activity-feed ng-if="$ctrl.currentView.getValue() == 'list'"
                           [reviews]="$ctrl.userReviews[$ctrl.currentUser.id]"
                           [recommendations]="$ctrl.userRecommendations"
                           [is-anonymous]="!$ctrl.currentUser"></activity-feed>
        </div>

        <div flex="50" flex-xs="100">
            <media-browser ng-if="$ctrl.currentView.getValue() == 'list'"
                           (review)="$ctrl.viewMediaDetail($event)"
                           (recommend)="$ctrl.viewMediaDetail($event)"></media-browser>

            <reviews-list ng-if="$ctrl.currentView.getValue() == 'detail'"
                          [reviews]="$ctrl.mediaReviews[$ctrl.currentMedia.id]"
                          [can-review]="$ctrl.currentUser"
                          (create-review)="$ctrl.onCreateReview($event)"></reviews-list>
        </div>
    </div>
</md-content>
